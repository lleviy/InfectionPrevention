# InfectionPrevention
## Описание
«Районы-кварталы» - сервис для отслеживания распространения и поиска мер предотвращения вирусных инфекций. Сервис предназначен для использования как юридическими, так и физическими лицами. С помощью карты на сайте можно просматривать в каких районах и округах распространяется болезнь, а в каких можно чувствовать себя вне опасности. А также получать советы по минимизации рисков при наименьшем изменении привычной активности.

Стек решения: python, django, redis, javascript

Уникальность: позволяет предпринимать оперативные действия по борьбе с вирусом благодаря возможности не только посмотреть настоящую и прошлую распространённость заболевания, но и заглянуть в будущее! 

## Реализация
На вход был получен большой объем данных. Из-за нехватки мощности пришлось отделять небольшой датасет для обучения. Это было сделано с помощью функции фильтрующей и чистящей данные. Для получения геометок было создано подключения по API к Яндекс Картам, также были получены геометки по адресам заболевших граждан из excel файла.

По полученным данным были обучены две модели. **Первая** предсказывает количество человек на территории сектора, находящихся там продолжительное время, работающих и проживающих. А **вторая**, обученная на исторических данных, предсказывает количество заболевших исходя из данных, полученных в первой модели.

Для создания рассылок был найден канал, по которому можно делать email рассылки, после выбора нужного порта, были перекодированы сообщения (изначально отправлялись только на английском) и настроена фильтрация, чтоб не отправлялись в спам. SMS рассылка была подключена через API, для Телеграмм бота был настроен интуитивно понятный пользователю функционал, и настроена интеграция данных с основного сайта.

Сайт был написан на JavaScript, через Яндекс API была настроена карта, анимированная визуализация, подключение к модели обучения, настройка фильтрации по запросу пользователю,  считывание геоданных всех районов Москвы и нанесение их на карту. 

Были использованы библиотеки: pandas, sklearn.model_selection, warnings, statsmodels, datetime, Smtplib, email, mainsms, pytelegrambotapi, numpy, pandas, matplotlib, os, pickle

## Telegram бот

https://drive.google.com/drive/folders/1stouXjuR1PI647pi5EIyN24npcQjQCRC?usp=sharing

## API-интерфейс приложения

GET /api/districts/ - все районы

GET /api/districts/?district=66 - информация о районе с id=66 

POST api/accounts/auth/users/?email=example@example.com&username=example&password=example - регистрация

POST api/accounts/auth/token/login/?username=example&password=example - авторизация

GET api/accounts/auth/token/logout/ - выход (только с токеном)

GET, PUT api/accounts/profile - профиль пользователя (только с токеном)

## Установка
1. Клонировать репозиторий на свой компьютер ```git clone https://github.com/lleviy/InfectionPrevention.git```

2. Создать файл secrets.json, куда положить собственные ключи для доступа по API к Яндекс.Картам, к сервису SMS-рассылок MainSMS и т.д.

2. Создать виртуальное окружение в папке с проектом: ```python -m venv venv```

3. Активировать его: ```venv\Scripts\activate```

4. Установить зависимости ```pip install -r requirements.txt```

5. Создать миграции для БД ```python manage.py makemigrations```

6. Применить миграции ```python manage.py migrate```

7. Запустить локальный сервер ```python manage.py runserver```
